import { useEffect, useState } from 'react'
import './App.css'

interface CardState {
    value: string;
    isChecked: boolean;
}

const lines: string[] = [
    'Zere benen',
    'Nee nee nee',
    'Buurtzorg',
    'Hoef niet meer',
    'Zie niemand',
    'Kom nergens',
    'Rinus',
    'Zonnebloem',
    'Hulp',
    'Was',
    'Plek hoofd',
    'Zeker geen',
    'Rollator',
    'Planten',
    'Kerst',
    'Wanneer vrij',
    'Vogelvoer',
    'Buren',
    'Klaverjassen',
    'Van der Wal',
    'Bets',
    'Jenever',
    'Opladen scootmobiel',
    'Corona',
    'Boodschappen'
];

function App() {

    const [cards, setCards] = useState<CardState[][]>([])

    const shuffleArray = (array: string[]): string[] => {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            const temp = array[i];
            array[i] = array[j];
            array[j] = temp;
        }

        return array
    }


    const fillCard = () => {
        const curArr = shuffleArray([...lines])
        const newArr: CardState[][] = []

        for (let i = 0; i < 5; i++) {
            newArr.push([])
            for (let j = 0; j < 5; j++) {
                const randomWord = curArr.pop()
                newArr[i].push({
                    value: (randomWord) ? randomWord : '',
                    isChecked: false
                })
            }
        }

        console.log(newArr)
        setCards(newArr)
    }

    useEffect(() => {
        fillCard()
    }, []);

    return (
        <>
            <h1>Bingo</h1>
            {cards.map((row, rowIndex) => {
                return <div className="container-row">
                    {row.map((x, xIndex) => {
                        return <div
                            className={`card-container ${x.isChecked ? 'checked' : ''}`}
                            onClick={() => {
                                const copy = cards
                                copy[rowIndex][xIndex] = {
                                    value: x.value,
                                    isChecked: !x.isChecked
                                }

                                setCards([...copy])
                            }}
                        >
                            {x.value}
                        </div>
                    })}
                </div>
            })}
        </>
    )
}

export default App
